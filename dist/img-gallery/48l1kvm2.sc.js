/*! Built with http://stenciljs.com */
const{h:e}=window.ImgGallery;class t{componentDidLoad(){this.addIntersectionObserver()}componentWillUpdate(){this.src!==this.oldSrc&&this.addIntersectionObserver(),this.oldSrc=this.src}handleImage(){const e=this.el.shadowRoot.querySelector("img");e.setAttribute("src",e.getAttribute("data-src")),e.onload=(()=>{e.removeAttribute("data-src")})}addIntersectionObserver(){this.src&&("IntersectionObserver"in window?(this.io=new IntersectionObserver(e=>{e[0].isIntersecting&&(this.handleImage(),this.removeIntersectionObserver())}),this.io.observe(this.el.shadowRoot.querySelector("img"))):setTimeout(()=>{this.handleImage()},300))}removeIntersectionObserver(){this.io&&(this.io.disconnect(),this.io=null)}render(){return e("img",{class:"img_gallery_image","data-src":this.src,alt:this.alt})}static get is(){return"img-gallery-image"}static get encapsulation(){return"shadow"}static get properties(){return{alt:{type:String,attr:"alt"},el:{elementRef:!0},oldSrc:{state:!0},src:{type:String,attr:"src"}}}static get style(){return".sc-img-gallery-image-h{display:inline-block}img.sc-img-gallery-image{max-width:100%;max-height:100%}"}}export{t as ImgGalleryImage};